<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Project 1 Keamanan Data</title>
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet"
        type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../css/styles.css" rel="stylesheet" />
</head>

<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
        <a style="visibility: hidden;" class="navbar-brand js-scroll-trigger" href="#"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span
                class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html">Tentang Kami</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="caesar.html">Caesar Cipher</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="vigenere.html">Vigenere Cipher</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger active" href="#">Playfair Cipher</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="box.html">Columnar Cipher</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="zigzag.html">Zigzag Cipher</a>
                </li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="affine.html">Affine Cipher</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="hill.html">Hill Cipher</a></li>
            </ul>
        </div>
    </nav>
    <!-- Page Content-->
    <div class="container-fluid p-0">
        <!-- Substitusi Playfair Cipher-->
        <section class="resume-section" id="playfair">
            <div class="row">
                <h1>PlayFair Cipher</h1>
                <p align="justify">
                    Dalam teknik ini pesan dienkripsi berdasarkan pasangan huruf, bukan huruf tunggal seperti sandi
                    klasik lainnya. <b>Sandi Playfair</b> ditemukan oleh ahli Fisika berkebangsaan Inggris bernama
                    <b>Sir Charles Wheatstone</b> (1802 - 1875) namun dipromosikan oleh <b>Baron Lyon Playfair</b> (1819
                    - 1898) pada tahun 1854. Dibandingkan dengan sandi-sandi lainnya, sandi Playfair dapat meningkatan
                    keamanan dalam pengiriman sebuah pesan rahasia sehingga dapat memberikan jaminan integritas data
                    serta menjaga kerahasiaan. Sandi Playfair pertama kali digunakan untuk tujuan-tujuan taktis oleh
                    pasukan Inggris dalam Perang Boer II dan Perang Dunia I. Australia dan Jerman juga menggunakan sandi
                    ini untuk tujuan yang sama dalam Perang Dunia II. Sandi Playfair paling sering digunakan karena
                    penggunaannya yang sangat sederhana dan tidak memerlukan peralatan khusus untuk membaca atau
                    menerjemahkan suatu sandi yang bersifat rahasia. Pada perkembangan selanjutnya, sandi ini tidak lagi
                    digunakan oleh pasukan militer karena telah muncul berbagai perangkat enkripsi digital untuk
                    menerjemahkannya. Sandi Playfair dianggap tidak aman lagi untuk menjaga suatu kerahasiaan pesan
                    karena komputer dengan peranti lunak tertentu dapat memecahkan suatu sandi dalam hitungan
                    detik.<br><br>

                    Sandi Playfair menggunakan 25 huruf sebagai kunci yang disusun dalam bujur sangkar dengan
                    menghilangkan huruf J dari abjad. Susunan kunci di dalam bujur sangkar tersebut diperluas dengan
                    menambahkan kolom keenam dan baris keenam.
                </p>
                <br><br>
                <center>
                    <div class="col-lg mt-12">
                        <div class="row-md mb-1">
                            <div class="row gy-4 mt-8 justify-content-center" data-aos="zoom-in" data-aos-delay="250">
                                <div class="col-xl-3 col-md-4">
                                    <div class="icon-box">
                                        <input type="text" class="form-control" id="String" name="text"
                                            placeholder="PLAINTEXT" required>
                                    </div>
                                </div>
                                <div class="col-xl-2 col-md-4">
                                    <div class="icon-box">
                                        <input type="text" class="form-control" id="key" name="kunci"
                                            placeholder="KEY (STRING)" required>
                                    </div>
                                </div>
                                <div class="col-xl-2 col-md-4">
                                    <div class="icon-box">
                                        <input type="button" class="btn btn-primary" value="Encrypt"
                                            onclick="processKey(), cipher()" />
                                    </div>
                                </div>
                                <div class="col-xl-3 col-md-12">
                                    <div class="icon-box">
                                        <div style="color: black"><span id="printValue"> - </span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="row-md"></div>
                        <div class="row gy-4 mt-8 justify-content-center" data-aos="zoom-in" data-aos-delay="250">
                            <div class="col-xl-3 col-md-4">
                                <div class="icon-box">
                                    <input type="text" class="form-control" id="String2" name="text"
                                        placeholder="PLAINTEXT" required>
                                </div>
                            </div>
                            <div class="col-xl-2 col-md-4">
                                <div class="icon-box">
                                    <input type="text" class="form-control" id="key2" name="kunci"
                                        placeholder="KEY (STRING)" required>
                                </div>
                            </div>
                            <div class="col-xl-2 col-md-4">
                                <div class="icon-box">
                                    <input type="button" class="btn btn-success" value="Decrypt"
                                        onclick="deCodeCipher()" />
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-12">
                                <div class="icon-box">
                                    <div style="color: black"><span id="printDeCode"> - </span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </center>
            </div>
        </section>
    </div>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="../js/scripts.js"></script>
    <script>
        var isChet = false;
        var isEnd = false;
        var flag = false;
        var flagX = false;
        var flagAdd = false;

        function getKeyword(key) {
            var key = document.getElementById("key").value;
            return document.getElementById("key").value;
        }

        function getKeyword2(key) {
            var key = document.getElementById("key2").value;
            return document.getElementById("key2").value;
        }

        function getString() {
            return document.getElementById("String").value;
        }

        function getString2() {
            return document.getElementById("String2").value;
        }

        function processKey() {
            var key = getKeyword();
            key = key.toUpperCase().replace(/\s/g, '').replace(/J/g, "I");
            var result = [];
            var temp = '';
            var alphabet = 'ABCDEFGHIKLMNOPQRSTUVWXYZ';
            for (var i = 0; i < key.length; i++) {
                if (alphabet.indexOf(key[i]) !== -1) {
                    alphabet = alphabet.replace(key[i], '');
                    temp += key[i];
                }
            }
            temp += alphabet;
            var result = [];
            temp = temp.split('');
            while (temp[0]) {
                result.push(temp.splice(0, 5));
            }
            return result;
        }

        function processKey2() {
            var key = getKeyword2();
            key = key.toUpperCase().replace(/\s/g, '').replace(/J/g, "I");
            var result = [];
            var temp = '';
            var alphabet = 'ABCDEFGHIKLMNOPQRSTUVWXYZ';
            for (var i = 0; i < key.length; i++) {
                if (alphabet.indexOf(key[i]) !== -1) {
                    alphabet = alphabet.replace(key[i], '');
                    temp += key[i];
                }
            }
            temp += alphabet;
            var result = [];
            temp = temp.split('');
            while (temp[0]) {
                result.push(temp.splice(0, 5));
            }
            return result;
        }

        function cipher() {
            var keyresult = processKey();
            var res = [];
            var error = 'Warning!!! String is empty';
            var str = getString();
            if (str === '') {
                document.getElementById('printValue').innerHTML = error;
            }
            // var err = 'ERRORX';
            var textPhrase, separator;
            str = str.toUpperCase().replace(/\s/g, '').replace(/J/g, "I");
            if (str.length === 0) {
                //document.getElementById("printValue").innerHTML = err.toUpperCase().replace(/\s/g, '').replace(/J/g, "I");
            } else {
                textPhrase = str[0];
            }
            var help = 0;
            flagAdd = false;
            for (var i = 1; i < str.length; i++) {
                if (str[i - 1] === str[i]) {
                    if (str[i] === 'X') {
                        separator = 'Q';
                    } else {
                        separator = 'X';
                    }
                    textPhrase += separator + str[i];
                    help = 1;
                } else {
                    textPhrase += str[i];
                }
                if (help === 1) {
                    flagAdd = true;
                }
            }

            if (textPhrase.length % 2 !== 0) {
                if (textPhrase[textPhrase.length - 1] === 'X') {
                    textPhrase += 'Q';
                    isEnd = true;
                    flagX = false;
                } else {
                    textPhrase += 'X';
                    isEnd = true;
                    flagX = true;
                }
            }

            var t = [];
            var enCodeStr = '';
            for (var i = 0; i < textPhrase.length; i += 2) {
                var pair1 = textPhrase[i];
                var pair2 = textPhrase[i + 1];
                var p1i, p1j, p2i, p2j;
                for (var stroka = 0; stroka < keyresult.length; stroka++) {
                    for (var stolbec = 0; stolbec < keyresult[stroka].length; stolbec++) {
                        if (keyresult[stroka][stolbec] == pair1) {
                            p1i = stroka;
                            p1j = stolbec;
                        }
                        if (keyresult[stroka][stolbec] == pair2) {
                            p2i = stroka;
                            p2j = stolbec;
                        }
                    }
                }
                var coord1 = '',
                    coord2 = '';

                if (p1i === p2i) {
                    if (p1j === 4) {
                        coord1 = keyresult[p1i][0];
                    } else {
                        coord1 = keyresult[p1i][p1j + 1];
                    }
                    if (p2j === 4) {
                        coord2 = keyresult[p2i][0];
                    } else {
                        coord2 = keyresult[p2i][p2j + 1]
                    }
                }
                if (p1j === p2j) {
                    if (p1i === 4) {
                        coord1 = keyresult[0][p1j];
                    } else {
                        coord1 = keyresult[p1i + 1][p1j];
                    }
                    if (p2i === 4) {
                        coord2 = keyresult[0][p2j];
                    } else {
                        coord2 = keyresult[p2i + 1][p2j]
                    }
                }
                if (p1i !== p2i && p1j !== p2j) {
                    coord1 = keyresult[p1i][p2j];
                    coord2 = keyresult[p2i][p1j];
                }
                enCodeStr = enCodeStr + coord1 + coord2;
            }
            document.getElementById("printValue").innerHTML = enCodeStr;
            return enCodeStr;
        }

        function deCodeCipher() {
            var deCodeStr = '';
            var text = '';
            var error = "Warning!!! String is empty";
            var text1 = getString2();
            if (text1 === '') {
                document.getElementById('printDeCode').innerHTML = error;
            }
            var keyresult = processKey2();
            for (var i = 0; i < text1.length; i += 2) {
                var pair1 = text1[i];
                var pair2 = text1[i + 1];
                var p1i, p1j, p2i, p2j;
                for (var stroka = 0; stroka < keyresult.length; stroka++) {
                    for (var stolbec = 0; stolbec < keyresult[stroka].length; stolbec++) {
                        if (keyresult[stroka][stolbec] == pair1) {
                            p1i = stroka;
                            p1j = stolbec;
                        }
                        if (keyresult[stroka][stolbec] == pair2) {
                            p2i = stroka;
                            p2j = stolbec;
                        }
                    }
                }
                var coord1 = '',
                    coord2 = '';

                if (p1i === p2i) {
                    if (p1j === 0) {
                        coord1 = keyresult[p1i][4];
                    } else {
                        coord1 = keyresult[p1i][p1j - 1];
                    }
                    if (p2j === 0) {
                        coord2 = keyresult[p2i][4];
                    } else {
                        coord2 = keyresult[p2i][p2j - 1]
                    }
                }
                if (p1j === p2j) {
                    if (p1i === 0) {
                        coord1 = keyresult[4][p1j]
                    } else {
                        coord1 = keyresult[p1i - 1][p1j];
                    }
                    if (p2i === 0) {
                        coord2 = keyresult[4][p2j];
                    } else {
                        coord2 = keyresult[p2i - 1][p2j]
                    }
                }
                if (p1i !== p2i && p1j !== p2j) {
                    coord1 = keyresult[p1i][p2j];
                    coord2 = keyresult[p2i][p1j];
                }
                text = text + coord1 + coord2;
            }
            text = text.split('');

            for (var i = 0; i < text.length; i++) {
                var count;
                if (flagAdd) {
                    if (text[i] === text[i + 2] && (text[i + 1] === 'X' || text[i + 1] ===
                        'Q')) {
                        count = i + 1;
                        text.splice(count, 1);
                    }
                } else if (flagAdd && isEnd && (flagX || !flagX)) {
                    if (text[i - 2] === text[i] && (text[i - 1] === 'X' || text[i - 1] === 'Q'))
                        count = i + 1;
                    text.splice(count, 1);
                } else if (!flagAdd) {
                    break;
                }
            }
            if (flagX) {
                text.pop();
            }
            if (isEnd && !flagX) {
                text.pop();
            }
            text = text.join('');
            console.log(text);
            document.getElementById('printDeCode').innerHTML = text;
        }
    </script>
</body>

</html>